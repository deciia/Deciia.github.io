{"title":"GMS优先度引擎、状态管理等发布","slug":"game/Priority-Engine","date":"2015-08-10T16:26:24.000Z","updated":"2017-05-12T06:23:40.670Z","comments":true,"path":"api/articles/game/Priority-Engine.json","photos":["https://i.gyazo.com/11cec9ca9501105062c9834f651eb558.png"],"link":"","excerpt":"当当当，发布一个GMS的优先度引擎。优先度引擎下载请点击：yoyo市场链接<br>查看源码：OpenGmsLibs GMS开源插件库简单介绍几个常用的API。","covers":null,"content":"<p>当当当，发布一个GMS的优先度引擎。</p>\n<h3 id=\"优先度引擎\"><a href=\"#优先度引擎\" class=\"headerlink\" title=\"优先度引擎\"></a>优先度引擎</h3><p>下载请点击：<a href=\"https://marketplace.yoyogames.com/assets/2194/priorityengine\" target=\"_blank\" rel=\"external\">yoyo市场链接</a><br>查看源码：<a href=\"https://coding.net/u/deciia/p/OpenGmsLibs/git\" target=\"_blank\" rel=\"external\">OpenGmsLibs GMS开源插件库</a></p>\n<p>简单介绍几个常用的API。</p>\n<a id=\"more\"></a>\n<h4 id=\"PriorityInit\"><a href=\"#PriorityInit\" class=\"headerlink\" title=\"PriorityInit\"></a>PriorityInit</h4><p><strong><em>PriorityInit()</em></strong><br>初始化，在游戏开始或房间创建事件中使用。<br>返回：N/A<br>举例：</p>\n<pre><code>PriorityInit();\n</code></pre><h4 id=\"PriorityBegin\"><a href=\"#PriorityBegin\" class=\"headerlink\" title=\"PriorityBegin\"></a>PriorityBegin</h4><p><strong><em>PriorityBegin(Priority,id,”inState”[,islistid,isliststate])</em></strong><br>添加优先度，在单步中使用。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数</th>\n<th style=\"text-align:center\">说明 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Priority</td>\n<td style=\"text-align:center\">添加的优先度的值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">id</td>\n<td style=\"text-align:center\">添加优先度的实例ID</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">“inState”</td>\n<td style=\"text-align:center\">添加优先度的状态</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">islistid</td>\n<td style=\"text-align:center\">可选，是否将ID生成列表</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">isliststate</td>\n<td style=\"text-align:center\">可选，是否将状态生成列表</td>\n</tr>\n</tbody>\n</table>\n<p>返回：true/false</p>\n<p>id,”inState” 作为一对组合生成一个由逗号隔开的字符串<code>string(argument[1])+&quot;,&quot;+argument[2]</code>，作为优先度的value添加到优先度数据中。从数据中获取优先度也是通过这个字符串。</p>\n<blockquote>\n<p>可添加的最高优先度是10000。</p>\n</blockquote>\n<p>可选参数设置后，将会为每个ID或者状态生成一个列表，将同一个ID不同状态，或者同一个状态不同ID的数据添加到列表中方便后续调用。</p>\n<p>例如：</p>\n<pre><code>//为id+S1状态添加一个优先度为1，并将优先度添加到ID列表和状态列表。\nPriorityBegin(1,id,&quot;s1&quot;,true,true);\n</code></pre><h4 id=\"PriorityEnd\"><a href=\"#PriorityEnd\" class=\"headerlink\" title=\"PriorityEnd\"></a>PriorityEnd</h4><p><strong><em>PriorityEnd(id,”inState”)</em></strong><br>删除一个优先度。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数</th>\n<th style=\"text-align:center\">说明 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">id</td>\n<td style=\"text-align:center\">需要删除优先度的实例ID</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">“inState”</td>\n<td style=\"text-align:center\">需要删除优先度的状态</td>\n</tr>\n</tbody>\n</table>\n<p>返回：real</p>\n<p>这个函数和PriorityBegin是一对开关，添加优先度后，完成任务后删除。</p>\n<p>例如：</p>\n<pre><code>if tap PriorityBegin(11,id,&quot;s1&quot;,true,true);\nelse PriorityEnd(id,&quot;s1&quot;);\n</code></pre><p>开关开启时添加优先度，结束时删除优先度。</p>\n<h4 id=\"PriorityDo\"><a href=\"#PriorityDo\" class=\"headerlink\" title=\"PriorityDo\"></a>PriorityDo</h4><p><strong><em>PriorityDo(Priority)</em></strong><br>返回某个优先度的动作是否可以执行。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数</th>\n<th style=\"text-align:center\">说明 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Priority</td>\n<td style=\"text-align:center\">检测的优先度的值</td>\n</tr>\n</tbody>\n</table>\n<p>返回：true/false</p>\n<p>使用这个函数判断是否可以执行一个优先度的任务，如果没有更高的优先度（更低的优先度的值），则返回真，否则假。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">if  (PriorityDo(10))</div><div class=\"line\">&#123;</div><div class=\"line\">tap = !tap;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果没有比10更高的优先度，则执行开关的切换。</p>\n<h3 id=\"状态管理\"><a href=\"#状态管理\" class=\"headerlink\" title=\"状态管理\"></a>状态管理</h3><p>现在发布的是一个lite开发版，包括了state和custom alarm这两块。专业版的功能有：</p>\n<ul>\n<li>state与sprite的双层状态</li>\n<li>通过bit数设置计时器的开关，多种开启计时器的方式</li>\n</ul>\n<p>预计会在下个月先在yoyo市场发布，然后进入一个开源倒计时，之后便在<a href=\"https://coding.net/u/deciia/p/OpenGmsLibs/git\" target=\"_blank\" rel=\"external\">开源的插件</a>库中分享。</p>\n<p>具体的文档：<a href=\"https://coding.net/u/deciia/p/OpenGmsLibs/topic/48635\" target=\"_blank\" rel=\"external\">https://coding.net/u/deciia/p/OpenGmsLibs/topic/48635</a></p>\n","categories":[{"name":"游戏","slug":"游戏","count":11,"path":"api/categories/游戏.json"}],"tags":[{"name":"发布","slug":"发布","count":1,"path":"api/tags/发布.json"}]}